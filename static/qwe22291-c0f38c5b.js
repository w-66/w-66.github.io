import{r as m,j as y,c as $,aR as S,aS as p}from"./index-1b6323ef.js";import{a as _}from"./axios-28bc18a3.js";import{R as F,A as g}from"./index-fb91c695.js";const j=["xxl","xl","lg","md","sm","xs"],v="xs",E=m.createContext({prefixes:{},breakpoints:j,minBreakpoint:v});function R(e,t){const{prefixes:s}=m.useContext(E);return e||s[t]||t}function k(){const{breakpoints:e}=m.useContext(E);return e}function B(){const{minBreakpoint:e}=m.useContext(E);return e}const w=m.forwardRef(({bsPrefix:e,fluid:t=!1,as:s="div",className:o,...l},a)=>{const r=R(e,"container"),u=typeof t=="string"?`-${t}`:"-fluid";return y.jsx(s,{ref:a,...l,className:$(o,t?`${r}${u}`:r)})});w.displayName="Container";const G=w,N=m.forwardRef(({bsPrefix:e,className:t,as:s="div",...o},l)=>{const a=R(e,"row"),r=k(),u=B(),x=`${a}-cols`,f=[];return r.forEach(n=>{const c=o[n];delete o[n];let i;c!=null&&typeof c=="object"?{cols:i}=c:i=c;const h=n!==u?`-${n}`:"";i!=null&&f.push(`${x}${h}-${i}`)}),y.jsx(s,{ref:l,...o,className:$(t,a,...f)})});N.displayName="Row";const J=N;function L({as:e,bsPrefix:t,className:s,...o}){t=R(t,"col");const l=k(),a=B(),r=[],u=[];return l.forEach(x=>{const f=o[x];delete o[x];let n,c,i;typeof f=="object"&&f!=null?{span:n,offset:c,order:i}=f:n=f;const h=x!==a?`-${x}`:"";n&&r.push(n===!0?`${t}${h}`:`${t}${h}-${n}`),i!=null&&u.push(`order${h}-${i}`),c!=null&&u.push(`offset${h}-${c}`)}),[{...o,className:$(s,...r,...u)},{as:e,bsPrefix:t,spans:r}]}const I=m.forwardRef((e,t)=>{const[{className:s,...o},{as:l="div",bsPrefix:a,spans:r}]=L(e);return y.jsx(l,{...o,ref:t,className:$(s,!r.length&&a)})});I.displayName="Col";const Q=I,{loginState:{loginTimeStamp:d}}=S.getState();function M(e){return e/(1e3*60*60*24).toFixed(1)*1}function O(){return d*1===0||d===null?0:new Date().getTime()-d*1}const z=_.create({baseURL:"http://qwertyui.vip:22291",timeout:5e3}),T=_.create({baseURL:"http://qwertyui.vip:22291/token/",timeout:5e3});let C=!1,A;function D(){A=setTimeout(()=>{C=!1},g*60*1e3-1e3)}function K(){clearTimeout(A),D()}async function U(){try{await T.post("/verify/",{token:p("refresh_token")})}catch{}try{const e=await T.post("/refresh/",{refresh:p("refresh_token")});localStorage.setItem("access_token",e.data.access),K(),C=!0}catch{}}z.interceptors.request.use(async e=>{const t=parseFloat(M(O()).toFixed(5));if(C===!0)return e.headers.Authorization=`Bearer ${p("access_token")}`,e;if(p("refresh_token")&&F>t)try{await T.post("/verify/",{token:p()}),e.headers.Authorization=`Bearer ${p()}`}catch(s){console.log(9200,"access token 更新失败，无效或过期",s.response.status,s.response.statusText),await U(),e.headers.Authorization=`Bearer ${p("access_token")}`}return e},e=>Promise.reject(e));export{G as C,J as R,Q as a,z as m};
