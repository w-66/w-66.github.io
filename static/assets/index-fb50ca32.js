import{p as t,P as d,q as e,A as D,w as C,B as P,x as R}from"./index-2c5cc3df.js";import{m as L,C as z,R as v,a as w}from"./qwe22291-a41474f3.js";import{L as h}from"./index-c7dc59ce.js";import{S as k}from"./Skeleton-7aba59ce.js";import{I as q}from"./index-149c9d72.js";import"./Pagination-b01752fd.js";import"./index-64924646.js";import"./SearchOutlined-30b41272.js";import"./useLocale-87a9c90c.js";function N(p){const[r,u]=t.useState(!0),[m,n]=t.useState(!1),[c,o]=t.useState([]),[s,l]=t.useState([]),[E]=t.useState(5),[g,x]=t.useState(2),[b,y]=t.useState(""),[I,j]=t.useState(!0),[f,M]=t.useState();t.useEffect(()=>{d.subscribe("music_search",(a,i)=>{const{loading:V,list:S,searchValue:A,err:B}=i;M(B),u(V),l(S),o(S),y(A),x(2),j(!0)})},[]);const T=()=>{x(g+1),n(!0),l(c.concat([...new Array(E)].map(()=>({loading:!0,song:{},songer:{},tag:{},addtime:{}})))),L.get("apimusiclist",{params:{page:g,search:b}}).then(a=>{if(R(a.data,s)){n(!1),j(!1);const i=c.concat([]);o(i),l(i),window.dispatchEvent(new Event("resize"))}else{const i=c.concat(a.data);o(i),l(i),n(!1),window.dispatchEvent(new Event("resize"))}})},_=!r&&!m&&I&&f===void 0?e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px",marginBottom:"10px"},children:e.jsx(P,{onClick:T,children:"加载更多"})}):null;return e.jsx(e.Fragment,{children:e.jsx(h,{locale:{emptyText:f},className:"",loading:r,itemLayout:"horizontal",loadMore:_,dataSource:s,renderItem:a=>e.jsx(h.Item,{actions:[e.jsx("div",{children:"编辑"},"list-loadmore-edit"),e.jsx("div",{children:"更多"},"list-loadmore-more")],children:e.jsxs(k,{avatar:!0,title:!1,loading:a.loading,active:!0,children:["  ",e.jsx(h.Item.Meta,{avatar:e.jsx(D,{src:"static/icon/site_logo_small.svg"}),title:e.jsx("div",{href:"https://ant.design",style:{textOverflow:"ellipsis"},children:a.song}),description:`${C(a.addtime)}
                                [${a.album}]`}),e.jsx("div",{children:a.tag})]})})})})}function $(){const{Search:p}=q,[r,u]=t.useState([]),[m,n]=t.useState(!1),c=o=>{u(o),n(s=>!s),d.publish("music_search",{loading:!0})};return t.useEffect(()=>{(async()=>{try{L.get("apimusiclist",{params:{search:r}}).then(s=>{d.publish("music_search",{loading:!1,list:s.data,searchValue:r})}).catch(s=>{console.log(4002,"请求出错",s,s.request.response),d.publish("music_search",{loading:!1,err:s.message})})}catch{}})()},[m,r]),e.jsx("div",{children:e.jsx(p,{placeholder:"搜索",onSearch:c,className:"mb-3"})})}function X(){return e.jsxs(z,{fluid:"lg",children:[e.jsx(v,{}),e.jsxs(v,{children:[e.jsxs(w,{sm:3,children:[e.jsx($,{}),e.jsxs("div",{children:[e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore."}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore."}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur"}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur"})]})]}),e.jsx(w,{sm:9,children:e.jsx(N,{})})]})]})}export{X as default};
