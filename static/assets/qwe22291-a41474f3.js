import{p as m,q as y,h as $,aO as F,aP as p}from"./index-2c5cc3df.js";import{a as _,R as S,A as g}from"./index-149c9d72.js";const v=["xxl","xl","lg","md","sm","xs"],L="xs",E=m.createContext({prefixes:{},breakpoints:v,minBreakpoint:L});function C(e,t){const{prefixes:s}=m.useContext(E);return e||s[t]||t}function k(){const{breakpoints:e}=m.useContext(E);return e}function B(){const{minBreakpoint:e}=m.useContext(E);return e}const w=m.forwardRef(({bsPrefix:e,fluid:t=!1,as:s="div",className:o,...l},a)=>{const r=C(e,"container"),u=typeof t=="string"?`-${t}`:"-fluid";return y.jsx(s,{ref:a,...l,className:$(o,t?`${r}${u}`:r)})});w.displayName="Container";const H=w,N=m.forwardRef(({bsPrefix:e,className:t,as:s="div",...o},l)=>{const a=C(e,"row"),r=k(),u=B(),h=`${a}-cols`,f=[];return r.forEach(n=>{const c=o[n];delete o[n];let i;c!=null&&typeof c=="object"?{cols:i}=c:i=c;const x=n!==u?`-${n}`:"";i!=null&&f.push(`${h}${x}-${i}`)}),y.jsx(s,{ref:l,...o,className:$(t,a,...f)})});N.displayName="Row";const G=N;function j({as:e,bsPrefix:t,className:s,...o}){t=C(t,"col");const l=k(),a=B(),r=[],u=[];return l.forEach(h=>{const f=o[h];delete o[h];let n,c,i;typeof f=="object"&&f!=null?{span:n,offset:c,order:i}=f:n=f;const x=h!==a?`-${h}`:"";n&&r.push(n===!0?`${t}${x}`:`${t}${x}-${n}`),i!=null&&u.push(`order${x}-${i}`),c!=null&&u.push(`offset${x}-${c}`)}),[{...o,className:$(s,...r,...u)},{as:e,bsPrefix:t,spans:r}]}const I=m.forwardRef((e,t)=>{const[{className:s,...o},{as:l="div",bsPrefix:a,spans:r}]=j(e);return y.jsx(l,{...o,ref:t,className:$(s,!r.length&&a)})});I.displayName="Col";const J=I,{loginState:{loginTimeStamp:d}}=F.getState();function O(e){return e/(1e3*60*60*24).toFixed(1)*1}function M(){return d*1===0||d===null?0:new Date().getTime()-d*1}const q=_.create({baseURL:"http://qwertyui.vip:22291",timeout:5e3}),T=_.create({baseURL:"http://qwertyui.vip:22291/token/",timeout:5e3});let R=!1,A;function z(){A=setTimeout(()=>{R=!1},g*60*1e3-1e3)}function D(){clearTimeout(A),z()}async function K(){try{await T.post("/verify/",{token:p("refresh_token")})}catch{}try{const e=await T.post("/refresh/",{refresh:p("refresh_token")});localStorage.setItem("access_token",e.data.access),D(),R=!0}catch{}}q.interceptors.request.use(async e=>{const t=parseFloat(O(M()).toFixed(5));if(R===!0)return e.headers.Authorization=`Bearer ${p("access_token")}`,e;if(p("refresh_token")&&S>t)try{await T.post("/verify/",{token:p()}),e.headers.Authorization=`Bearer ${p()}`}catch(s){console.log(9200,"access token 更新失败，无效或过期",s.response.status,s.response.statusText),await K(),e.headers.Authorization=`Bearer ${p("access_token")}`}return e},e=>Promise.reject(e));export{H as C,G as R,J as a,q as m};
