import{r as t,P as m,j as e,f as D,B as C,c as P}from"./index-154b26d8.js";import{m as L,C as R,R as v,a as w}from"./qwe22291-f0c013d2.js";import{L as p}from"./index-b53ed963.js";import{S as z}from"./Skeleton-65c86e6c.js";import{A as k}from"./index-e378e383.js";import{I as N}from"./index-941ee269.js";import"./axios-28bc18a3.js";import"./Pagination-79a0d9c6.js";import"./LeftOutlined-8b1fa189.js";import"./RightOutlined-840fef85.js";import"./useBreakpoint-cbf209a2.js";import"./index-6b4ba6ce.js";import"./Overflow-2fa22d6b.js";import"./PurePanel-0ed3acd8.js";import"./statusUtils-278f5d62.js";import"./CheckOutlined-f33f92aa.js";import"./SearchOutlined-d68b5f0c.js";import"./TextArea-1c276180.js";import"./index-6f81d76a.js";import"./EyeOutlined-9978b4cc.js";function $(h){const[i,d]=t.useState(!0),[u,n]=t.useState(!1),[c,o]=t.useState([]),[s,l]=t.useState([]),[E]=t.useState(5),[g,x]=t.useState(2),[b,y]=t.useState(""),[I,f]=t.useState(!0),[j,M]=t.useState();t.useEffect(()=>{m.subscribe("music_search",(a,r)=>{const{loading:V,list:S,searchValue:A,err:B}=r;M(B),d(V),l(S),o(S),y(A),x(2),f(!0)})},[]);const T=()=>{x(g+1),n(!0),l(c.concat([...new Array(E)].map(()=>({loading:!0,song:{},songer:{},tag:{},addtime:{}})))),L.get("apimusiclist",{params:{page:g,search:b}}).then(a=>{if(P(a.data,s)){n(!1),f(!1);const r=c.concat([]);o(r),l(r),window.dispatchEvent(new Event("resize"))}else{const r=c.concat(a.data);o(r),l(r),n(!1),window.dispatchEvent(new Event("resize"))}})},_=!i&&!u&&I&&j===void 0?e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px",marginBottom:"10px"},children:e.jsx(C,{onClick:T,children:"加载更多"})}):null;return e.jsx(e.Fragment,{children:e.jsx(p,{locale:{emptyText:j},className:"",loading:i,itemLayout:"horizontal",loadMore:_,dataSource:s,renderItem:a=>e.jsx(p.Item,{actions:[e.jsx("div",{children:"编辑"},"list-loadmore-edit"),e.jsx("div",{children:"更多"},"list-loadmore-more")],children:e.jsxs(z,{avatar:!0,title:!1,loading:a.loading,active:!0,children:["  ",e.jsx(p.Item.Meta,{avatar:e.jsx(k,{src:"static/icon/site_logo_small.svg"}),title:e.jsx("div",{href:"https://ant.design",style:{textOverflow:"ellipsis"},children:a.song}),description:`${D(a.addtime)}
                                [${a.album}]`}),e.jsx("div",{children:a.tag})]})})})})}function q(){const{Search:h}=N,[i,d]=t.useState([]),[u,n]=t.useState(!1),c=o=>{d(o),n(s=>!s),m.publish("music_search",{loading:!0})};return t.useEffect(()=>{(async()=>{try{L.get("apimusiclist",{params:{search:i}}).then(s=>{m.publish("music_search",{loading:!1,list:s.data,searchValue:i})}).catch(s=>{console.log(4002,"请求出错",s,s.request.response),m.publish("music_search",{loading:!1,err:s.message})})}catch{}})()},[u,i]),e.jsx("div",{children:e.jsx(h,{placeholder:"搜索",onSearch:c,className:"mb-3"})})}function ce(){return e.jsxs(R,{fluid:"lg",children:[e.jsx(v,{}),e.jsxs(v,{children:[e.jsxs(w,{sm:3,children:[e.jsx(q,{}),e.jsxs("div",{children:[e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore."}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore."}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur"}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur"})]})]}),e.jsx(w,{sm:9,children:e.jsx($,{})})]})]})}export{ce as default};
