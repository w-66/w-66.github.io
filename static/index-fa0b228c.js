import{r as t,P as m,j as e,t as D,B as C,v as P}from"./index-1b6323ef.js";import{m as L,C as R,R as v,a as w}from"./qwe22291-c0f38c5b.js";import{L as p}from"./index-74f895ab.js";import{S as z}from"./Skeleton-0b583743.js";import{A as k}from"./index-d623530f.js";import{I as N}from"./index-fb91c695.js";import"./axios-28bc18a3.js";import"./Pagination-7cd3c21d.js";import"./LeftOutlined-2ea40467.js";import"./RightOutlined-c47acce2.js";import"./useBreakpoint-b852e6e0.js";import"./index-06dd2a5e.js";import"./Overflow-62a15762.js";import"./PurePanel-72c8a244.js";import"./statusUtils-9b9d8852.js";import"./CheckOutlined-1d2fd4b2.js";import"./SearchOutlined-1f37925b.js";import"./TextArea-e64046db.js";import"./index-bc0f2d0e.js";import"./index-87e7e444.js";import"./EyeOutlined-f18bc33b.js";function $(h){const[i,d]=t.useState(!0),[u,n]=t.useState(!1),[c,o]=t.useState([]),[s,l]=t.useState([]),[E]=t.useState(5),[g,x]=t.useState(2),[b,y]=t.useState(""),[I,j]=t.useState(!0),[f,M]=t.useState();t.useEffect(()=>{m.subscribe("music_search",(a,r)=>{const{loading:V,list:S,searchValue:A,err:B}=r;M(B),d(V),l(S),o(S),y(A),x(2),j(!0)})},[]);const T=()=>{x(g+1),n(!0),l(c.concat([...new Array(E)].map(()=>({loading:!0,song:{},songer:{},tag:{},addtime:{}})))),L.get("apimusiclist",{params:{page:g,search:b}}).then(a=>{if(P(a.data,s)){n(!1),j(!1);const r=c.concat([]);o(r),l(r),window.dispatchEvent(new Event("resize"))}else{const r=c.concat(a.data);o(r),l(r),n(!1),window.dispatchEvent(new Event("resize"))}})},_=!i&&!u&&I&&f===void 0?e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px",marginBottom:"10px"},children:e.jsx(C,{onClick:T,children:"加载更多"})}):null;return e.jsx(e.Fragment,{children:e.jsx(p,{locale:{emptyText:f},className:"",loading:i,itemLayout:"horizontal",loadMore:_,dataSource:s,renderItem:a=>e.jsx(p.Item,{actions:[e.jsx("div",{children:"编辑"},"list-loadmore-edit"),e.jsx("div",{children:"更多"},"list-loadmore-more")],children:e.jsxs(z,{avatar:!0,title:!1,loading:a.loading,active:!0,children:["  ",e.jsx(p.Item.Meta,{avatar:e.jsx(k,{src:"static/icon/site_logo_small.svg"}),title:e.jsx("div",{href:"https://ant.design",style:{textOverflow:"ellipsis"},children:a.song}),description:`${D(a.addtime)}
                                [${a.album}]`}),e.jsx("div",{children:a.tag})]})})})})}function q(){const{Search:h}=N,[i,d]=t.useState([]),[u,n]=t.useState(!1),c=o=>{d(o),n(s=>!s),m.publish("music_search",{loading:!0})};return t.useEffect(()=>{(async()=>{try{L.get("apimusiclist",{params:{search:i}}).then(s=>{m.publish("music_search",{loading:!1,list:s.data,searchValue:i})}).catch(s=>{console.log(4002,"请求出错",s,s.request.response),m.publish("music_search",{loading:!1,err:s.message})})}catch{}})()},[u,i]),e.jsx("div",{children:e.jsx(h,{placeholder:"搜索",onSearch:c,className:"mb-3"})})}function le(){return e.jsxs(R,{fluid:"lg",children:[e.jsx(v,{}),e.jsxs(v,{children:[e.jsxs(w,{sm:3,children:[e.jsx(q,{}),e.jsxs("div",{children:[e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore."}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore."}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur"}),e.jsx("span",{children:"Lorem ipsum dolor sit amet, consectetur"})]})]}),e.jsx(w,{sm:9,children:e.jsx($,{})})]})]})}export{le as default};
